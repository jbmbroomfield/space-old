{"ast":null,"code":"import Bezier from './Bezier';\nimport Vector from './Vector';\nimport Direction from './Direction';\n\nclass Journey {\n  static journey(origin, destination, t0, t3) {\n    const handling = 100;\n    const acceleration = 1;\n    const v0 = origin.velocity(t0);\n    const direction0 = Vector.direction(v0);\n    const line = Vector.subtract(destination.position(t3), origin.position(t0));\n    const unitLine = Vector.unitVector(line);\n    const lineDirection = Vector.direction(line);\n    const p0 = origin.position(t0);\n    const p1 = Vector.build(origin.position(t0), origin.direction(t0), handling);\n    const p7 = destination.position(t3);\n    const p6 = Vector.build(destination.position(t3), destination.negativeDirection(t3), handling);\n    const turn1Angle = Direction.subtract(lineDirection, direction0);\n    let p2;\n\n    if (turn1Angle <= Math.PI / 2 || turn1Angle >= 3 * Math.PI / 2) {\n      p2 = p1;\n    } else if (turn1Angle < Math.PI) {\n      const rotatedUnitLine = Vector.rotate(unitLine, 3 * Math.PI / 2);\n      const p1p2L = handling * (2 * turn1Angle / Math.PI - 1);\n      const p1p2 = Vector.multiply(p1p2L, rotatedUnitLine);\n      p2 = Vector.add(p1, p1p2);\n    } else {\n      const rotatedUnitLine = Vector.rotate(unitLine, Math.PI / 2);\n      const p1p2L = handling * (3 - 2 * turn1Angle / Math.PI);\n      const p1p2 = Vector.multiply(p1p2L, rotatedUnitLine);\n      p2 = Vector.add(p1, p1p2);\n    }\n\n    console.log({\n      t0,\n      t3,\n      p0,\n      p1,\n      p2\n    });\n    return new Bezier(t0, t3, p0, p1, p2); // const turn2Angle = Direction.subtract()\n  }\n\n}\n\nexport default Journey;","map":{"version":3,"sources":["/home/jim/projects/space/src/classes/Journey.js"],"names":["Bezier","Vector","Direction","Journey","journey","origin","destination","t0","t3","handling","acceleration","v0","velocity","direction0","direction","line","subtract","position","unitLine","unitVector","lineDirection","p0","p1","build","p7","p6","negativeDirection","turn1Angle","p2","Math","PI","rotatedUnitLine","rotate","p1p2L","p1p2","multiply","add","console","log"],"mappings":"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","sourcesContent":["import Bezier from './Bezier'\nimport Vector from './Vector'\nimport Direction from './Direction'\n\nclass Journey {\n\n    static journey(origin, destination, t0, t3) {\n        const handling = 100\n        const acceleration = 1\n\n        const v0 = origin.velocity(t0)\n        const direction0 = Vector.direction(v0)\n\n        const line = Vector.subtract(destination.position(t3), origin.position(t0))\n        const unitLine = Vector.unitVector(line)\n        const lineDirection = Vector.direction(line)\n        const p0 = origin.position(t0)\n        const p1 = Vector.build(origin.position(t0), origin.direction(t0), handling)\n\n        const p7 = destination.position(t3)\n        const p6 = Vector.build(destination.position(t3), destination.negativeDirection(t3), handling)\n\n        const turn1Angle = Direction.subtract(lineDirection, direction0)\n        let p2\n        if (turn1Angle <= Math.PI / 2 || turn1Angle >= 3*Math.PI / 2) {\n            p2 = p1\n        } else if (turn1Angle < Math.PI) {\n            const rotatedUnitLine = Vector.rotate(unitLine, 3 * Math.PI / 2)\n            const p1p2L = handling * (2 * turn1Angle / Math.PI - 1)\n            const p1p2 = Vector.multiply(p1p2L, rotatedUnitLine)\n            p2 = Vector.add(p1, p1p2)\n        } else { \n            const rotatedUnitLine = Vector.rotate(unitLine, Math.PI / 2)\n            const p1p2L = handling * (3 - 2 * turn1Angle / Math.PI)\n            const p1p2 = Vector.multiply(p1p2L, rotatedUnitLine)\n            p2 = Vector.add(p1, p1p2)\n        }\n\n        console.log({t0, t3, p0, p1, p2})\n\n        return new Bezier(t0, t3, p0, p1, p2)\n\n        // const turn2Angle = Direction.subtract()\n\n    }\n\n\n}\n\nexport default Journey"]},"metadata":{},"sourceType":"module"}