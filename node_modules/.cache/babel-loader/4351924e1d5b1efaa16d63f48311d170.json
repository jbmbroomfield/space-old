{"ast":null,"code":"import Bezier from './Bezier';\nimport Vector from './Vector';\nimport Direction from './Direction';\n\nclass Journey {\n  static journey(origin, destination, t0, t3) {\n    const handling = 100;\n    const acceleration = 1;\n    const v0 = origin.velocity(t0);\n    const direction0 = Vector.direction(v0);\n    const line = Vector.subtract(destination.position(t3), origin.position(t0));\n    const unitLine = Vector.unitVector(line);\n    console.log({\n      line\n    });\n    const lineDirection = Vector.direction(line);\n    const p0 = origin.position(t0);\n    const p1 = Vector.build(origin.position(t0), origin.direction(t0), handling);\n    const p7 = destination.position(t3);\n    const p6 = Vector.build(destination.position(t3), destination.negativeDirection(t3), handling);\n    console.log({\n      lineDirection,\n      direction0\n    });\n    const turn1Angle = Direction.subtract(lineDirection, direction0);\n    let p2;\n\n    if (turn1Angle <= Math.PI / 2 || turn1Angle >= 3 * Math.PI / 2) {\n      p2 = p1;\n    } else if (turn1Angle < Math.PI) {\n      const rotatedUnitLine = Vector.rotate(unitLine, 3 * Math.PI / 2);\n      const p1p2L = handling * (2 * turn1Angle / Math.PI - 1);\n      const p1p2 = Vector.multiply(p1p2L, rotatedUnitLine);\n      console.log('a');\n      console.log({\n        p1,\n        p1p2\n      });\n      p2 = Vector.add(p1, p1p2);\n    } else {\n      const rotatedUnitLine = Vector.rotate(unitLine, Math.PI / 2);\n      console.log({\n        turn1Angle\n      });\n      const p1p2L = handling * (3 - 2 * turn1Angle / Math.PI);\n      console.log({\n        p1p2L,\n        rotatedUnitLine\n      });\n      const p1p2 = Vector.multiply(p1p2L, rotatedUnitLine);\n      console.log('b');\n      console.log({\n        p1,\n        p1p2\n      });\n      p2 = Vector.add(p1, p1p2);\n    }\n\n    console.log({\n      t0,\n      t3,\n      p0,\n      p1,\n      p2\n    });\n    return new Bezier(t0, t3, p0, p1, p2); // const turn2Angle = Direction.subtract()\n  }\n\n}\n\nexport default Journey;","map":{"version":3,"sources":["/home/jim/projects/space/src/classes/Journey.js"],"names":["Bezier","Vector","Direction","Journey","journey","origin","destination","t0","t3","handling","acceleration","v0","velocity","direction0","direction","line","subtract","position","unitLine","unitVector","console","log","lineDirection","p0","p1","build","p7","p6","negativeDirection","turn1Angle","p2","Math","PI","rotatedUnitLine","rotate","p1p2L","p1p2","multiply","add"],"mappings":"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","sourcesContent":["import Bezier from './Bezier'\nimport Vector from './Vector'\nimport Direction from './Direction'\n\nclass Journey {\n\n    static journey(origin, destination, t0, t3) {\n        const handling = 100\n        const acceleration = 1\n\n        const v0 = origin.velocity(t0)\n        const direction0 = Vector.direction(v0)\n\n        const line = Vector.subtract(destination.position(t3), origin.position(t0))\n        const unitLine = Vector.unitVector(line)\n        console.log({line})\n        const lineDirection = Vector.direction(line)\n        const p0 = origin.position(t0)\n        const p1 = Vector.build(origin.position(t0), origin.direction(t0), handling)\n\n        const p7 = destination.position(t3)\n        const p6 = Vector.build(destination.position(t3), destination.negativeDirection(t3), handling)\n\n        console.log({lineDirection, direction0})\n        const turn1Angle = Direction.subtract(lineDirection, direction0)\n        let p2\n        if (turn1Angle <= Math.PI / 2 || turn1Angle >= 3*Math.PI / 2) {\n            p2 = p1\n        } else if (turn1Angle < Math.PI) {\n            const rotatedUnitLine = Vector.rotate(unitLine, 3 * Math.PI / 2)\n            const p1p2L = handling * (2 * turn1Angle / Math.PI - 1)\n            const p1p2 = Vector.multiply(p1p2L, rotatedUnitLine)\n            console.log('a')\n            console.log({p1, p1p2})\n            p2 = Vector.add(p1, p1p2)\n        } else { \n            const rotatedUnitLine = Vector.rotate(unitLine, Math.PI / 2)\n            console.log({turn1Angle})\n            const p1p2L = handling * (3 - 2 * turn1Angle / Math.PI)\n            console.log({p1p2L, rotatedUnitLine})\n            const p1p2 = Vector.multiply(p1p2L, rotatedUnitLine)\n            console.log('b')\n            console.log({p1, p1p2})\n            p2 = Vector.add(p1, p1p2)\n        }\n\n        console.log({t0, t3, p0, p1, p2})\n\n        return new Bezier(t0, t3, p0, p1, p2)\n\n        // const turn2Angle = Direction.subtract()\n\n    }\n\n\n}\n\nexport default Journey"]},"metadata":{},"sourceType":"module"}